---
title: 图像坐标系统以及图像通道 Image coordination system and image channel
date: 2017-01-07 20:10:31
tags: 图像坐标系统，图像通道，图像像素操作
---

图像数字化，个人认为其实就是将图像光栅化，大家都见过栅栏，竖着一条一条的，很规律。现在我们想象一下，我们用很多的网格来划分图像，这些网格都是方方正正的正方形，并且网格足够小，那么我们可以将这个点称之为像素。一张图片由很多的像素点组成。既然是网格化，那么我们就可以很方便地为每一个网格确定其位置，我们都学过二维坐标系，在二维坐标系上很方便就可以将一个点的坐标标定出来，现在我们的图像像素也是一样的，我们将二维坐标系运用在图像上，形成图像的坐标系统。

#### 图像坐标系与笛卡尔坐标系的区别

我们平常所使用的二维坐标系原点一般都会放置在左下角部分（当然也有放在中间位置的比较常见），但是图像坐标系将原点放置在左上角，并且y轴的方向与平常时候我们使用的二维坐标系的y轴方向恰好相反，x轴相一致。

假设我们现在拥有100*50的图片，那么我们左上角的像素点的坐标就是`(0,0)`，右下角的像素点的坐标就是`(99,49)`，这个一定要谨慎，我们的图像坐标是从0开始的。现在我们暂时使用`(x,y)`的坐标进行表示，过后我们在图像处理的时候会倒过来使用，到时候我们会提到。

#### 图像通道

在前面我们使用opencv读取硬盘里面的图片的时候曾经提到过灰度以及彩色空间的图片，其实这和图像通道数有关。如果我没有记错的话，应该是我们伟大的物理学家牛顿先生提到过光可以由红、绿、蓝三种颜色组合而成，所以我们要提到的图像通道也就是指这三者，每一个像素点都由这三者混合而成，要组合成不同的颜色，需要使用不同的组合，所以我们看到的彩色空间的颜色分类其实很多。

在opencv里我们可以通过`split`函数来将彩色图像划分成三个通道，也可以自己手动进行提取，不过我要提醒一下我们平常使用的Red、Blur、Green在opencv的顺序是Blur、Green、Red，下面我们写一些代码来分别展示我们提取到的三种通道的图像。

```bash
import cv2

imagePath = 'images/girl.jpg'

img = cv2.imread(imagePath, 1)

blurChannel, greenChannel, redChannel = cv2.split(img)

cv2.imshow('origin image', img)
cv2.imshow('blurChannel', blurChannel)
cv2.imshow('greenChannel', greenChannel)
cv2.imshow('redChannel', redChannel)

cv2.waitKey(0) & 0XFF
cv2.destroyAllWindows()
```

#### 颜色强度

对于灰度的图片，我们应该能感觉到这些图片应该是介于黑和白之间的。opencv是使用8位来表示颜色的，所以我们有0-255个强度值（2的8次方），0代表黑色，255代表白色。对于三颜色通道的值也是一样，从0~255之间的值。


#### 图像的像素操作

我们前面提到过图像是由很多的独立的像素点组成的，现在我们来对这些像素操作一下，我们来看一看赵丽颖（我的girl.jpg的图片是赵丽颖）的图片之中的左上角的像素点的值是多少，然后我们更改一下，最后显示，操作的代码如下：

```bash
#
# 略去加载图像的步骤
#
#获取左上角的像素值
print img[0,0]

"""
[202 189 181]
"""

#
# 将左上角的像素值改成[0,0,0]
#
img[0,0] = (0,0,0)

print img[0,0]

"""
[0 0 0]
"""
```

其实很简单的，只不过就是获取变量和为变量赋值的步骤。但是需要注意的是我们为像素点赋值的时候使用的元组的数据结构，而不是列表（数组）。

你有可能怀疑我上面的操作对图片是否真正起到了作用，想显示出来看看，但是很不幸，一个像素点太小，我们肉眼无法分辨，所以我们可以将我们需要更改的区域放大一些来查看效果，下面我们将赵丽颖的图片从左上角开始，将一个30*50的蓝色区域替代原来的图片。

首先解释一下，前面我们提到了图像坐标系的时候说了我们获取某一个像素点的坐标的时候不是按照我们平常的二维坐标系的`(x,y)`来获取的，正好相反，是通过`(y,x)`来获取，所以一会儿我们操作图像的时候第一个下标表示的就是y轴，第二个下标表示的是x轴，第三个坐标表示的是通道（如果是灰度值就是0）。

我们需要引入`Numpy`这个库，这个库可以方便的进行数组的操作，使用`import nunmpy`语句即可。

```bash
#
# 创建一个三维的数组，宽为50，高为30，总共有3个通道
#
smallArea = numpy.ones((30,50,3))
#将第一个通道——Blue全满上
smallArea[:,:,0] = smallArea[:,:,0] * 255

img[:30,:50,:] = smallArea

cv2.imshow('smallMask', img)
cv2.waitKey(0) & 0XFF
cv2.destroyAllWindows()
```

现在你绝对会看到在我们的图片的左上角位置出现了一小块区域的蓝色。


#### 总结

+ 图像坐标系统与我们平常使用的二维坐标系统有所差别，y轴恰好相反。

+ 图像的像素操作很简单，只需要像我们平常数组那样查询或者更改即可。

+ 图像通道数指的是彩色的时候为Blue、Green、Red这3类，灰度图片只有一个通道，在opencv中彩色的通道数顺序为BGR，而一般情况下我们喜欢使用RGB这样的顺序，opencv不知道为什么喜欢搞大事情。

下一节我们将会学习到如何在图像上绘制直线、圆和矩形。