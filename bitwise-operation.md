---
title: 位操作——bitwise operation
date: 2017-01-12 11:25:24
tags: 与、或、非、异或、AND、OR、NOT、XOR
---

#### 我的开场白

如果你像我一样数字电子技术考得不是很好的话，你应该会对这些门电路记忆犹新，这么说好像有一些不合理，因为在我们的常识之中，只有学得好了才会对某些东西记忆犹新。这是为什么呢？因为这些门电路太奇怪了，我们当时做实验的时候老师要求用简单的门电路结合，最后要求我们做成是什么加法器，还有更厉害的再结合一些定时器和LED做成显示倒计时的计数器，我当场就蒙了······你要问我我是怎么过了这门课的，我会告诉你，一定要搞好同学关系！

虽然咱们那门课学得不好，但是这并不会影响到我对此记忆犹新，更别说那些位操作了，是不？下面我们来看一下opencv中的位操作是什么样的。

## opencv的位操作

位操作可以说是比较低层次的操作，但是请相信我，这是很关键的操作，特别是以后我们会提到掩膜操作的时候你会发现它的厉害，现在我们暂且来看一下如何进行位操作吧！

其实你完全可以跳过此节进行下面章节的学习，当你需要使用位操作的时候，回过头来看本节的内容，那样你会像我一样“记忆犹新”了。

另外需要说明的是位操作是建立在二值图像上而言的，何为二值图像，即“非黑即白”，我们的图像中的像素点要么是黑色的，要么就是白色的，我们可以很方便得使用numpy来创建这样的图像。

如下面的代码，我们将创建两张图片，并在其中绘制矩形和圆，我们往后就会使用这两张图像来解释位操作。

```bash
import cv2
import numpy

#
# 建立一张二值图片，并在其中绘制一个矩形，在另外创建一张图像，并在其中绘制一个圆形
#
img1 = numpy.zeros((300,300), dtype='uint8')
img2 = img1.copy()

#
# 绘制矩形和圆
#
cv2.rectangle(img1, (20, 20), (280, 280), 255, -1)
cv2.circle(img2, (150, 150), 130, 255, -1)

cv2.imshow("rect image", img1)
cv2.imshow("circle image", img2 )
cv2.waitKey(0) & 0XFF
cv2.destroyAllWindows()
```

#### AND

与操作，当两者都为真的时候输出为真，否则为假，在我们的二值图像中，真表示白色，假表示黑色，下面我们来看一下我们将会得到什么图像：

```bash
#
# 在上面的代码的基础之上写如下的代码
#
bitwiseAnd = cv2.bitwise_and( img1, img2 )

cv2.imshow("AND", bitwiseAnd)
```

#### OR 

或操作，两者之中有至少一个为真的时候输出为真，否则为假。

#### NOT

非操作，取反。

#### XOR

异或操作，两者相异的时候输出为真，否则为假。

这些操作在opencv的函数与bitwise_and相类似，你只需要改变一下那个后缀即可。

#### 总结

位操作比较简单，当然，你可能也没有明白这些操作到底能干吗，所以说，我们还得继续挖掘，下一节我们将会学习掩膜的知识，但是现在我们来回顾一下我们位操作的东西：

AND 与操作，在二值图像中，如果两个像素之间都是白色的话，那么得到的图像中相应的像素也是白色的，否则为黑色的。

OR 或操作······

NOT 非操作······

XOR 异或操作······