---
title: 在图片上绘制简单的形状——直线、圆和矩形 draw on image
date: 2017-01-08 15:15:04
tags: draw on image、line、circle、reactangle
---
上一节中我们学习了`opencv中的图像像素操作，其实`opencv`内部的图像操作是依赖于`numpy`库的，所以我们在前一次的代码里面引入了`numpy`包。以后有可能我们都会将`opencv`和`numpy`这两个包一起引入了。不过上一次我们的操作是将图像上的左上角区域改变成我们需要的蓝色，其实相当于我们在这个图片上填充了一个矩形，挺容易的，现在如果我们想在图像上绘制一条直线，那么你有可能也会觉得这不也挺简单的嘛！我们只需要知道起点和终点不就能绘制了吗？按道理来说这并没有什么缺陷，但是我们的图像像素点是离散化的，所以绘制起来并不如我们想象中的那么简单，不过好在这些算法早就熟透大街了，所以实施起来也相当方便，这不，`opencv`就可以很方便地在一幅图像上绘制直线。

我们继续沿用我们上上一节的代码，也就是我们会对`girl.jpg`这张图片进行操作，加载图片之类的代码我就忽略了。

#### 绘制直线

在`opencv`中使用`line`这个函数来绘制直线，它的参数很简单，有四个是必选的，另外的是可选的，如下：

###### 必选参数

+ img 我们将在这个图片上进行操作，也就是我们前面加载到的图像

+ starPoint 起点坐标，注意这个坐标又使用(x,y)的形式

+ endPoint 终点坐标

+ color 如果你的img是彩色的，那么你需要传递进去BGR的值，如(255,0,0)，如果是单通道的，需要传递一个数值

###### 可选的参数

+ thickness 直线的宽度，可以传递一个数值

+ lineStyle 直线的种类（有可能需要虚线之类的，默认是实线solid）

代码如下：

```bash
import cv2

imagePath = 'images/girl.jpg'

img = cv2.imread(imagePath, 1)

#
# 绘制从(30,30)到(100,50)的直线，直线的颜色为红色，直线宽度为3
# 不用返回任何值
#
cv2.line(img, (30,30), (100,50), color=(255, 0, 0), thickness=3)

cv2.imshow('beautiful girl', img)
cv2.waitKey(0) & 0XFF
cv2.destroyAllWindows()
```

我们使用`cv2.line`函数的时候我是如何知道不需要返回任何值的呢？我来教你一个简单的方法，在你的命令行窗口启动Python之后引入`opencv`，然后使用Python的`help`函数来查看某一个你想要的函数的信息，如下：

```bash
import cv2

print help(cv2.line)
```

好了，现在我们来看一下如何绘制一个矩形。

#### 绘制矩形

想一下，我们要绘制一个矩形，总共需要知道这个矩形多少的信息呢？我只需要知道左上角点的坐标以及右下角的点的坐标即可，当然，有的库的接口是左上角点的坐标以宽高信息，但是`opencv`的接口选择了前者。`opencv`中使用`rectangle`函数来实现绘制矩形的功能，它的参数如下：

###### 必须参数

+ img 我们将正在img这个张图片上绘制矩形

+ startPoint 左上角的坐标

+ endPoint 左下角的坐标

+ color 矩形的颜色，与line函数的color相类似

###### 可选参数

+ thickness 矩形边框的宽度或者是否选择使用color所代表的颜色来填充整个矩形，如果是-1的话则表示使用color代表的矩形填充整个矩形，如果是其他大于0的整数的话表示矩形的边框的宽度

+ lineType 矩形边框的样式

在上面的代码中添加如下的代码，则我们就能在显示的图像看到我们需要绘制的矩形：

```bash
#
# 绘制左上角点为(10,10)、右下角点为(50,70)的矩形
#
cv2.rectangle(img, (10,10), (50,70), (200,200,0), 5)
```

绘制矩形还是那么简单方便，我想这些东西不会将你难住的，接下来我们来看一下如何绘制圆。

#### 绘制圆

绘制一个圆我们需要两个必须的值，一个圆心的坐标，另一个是半径，在`opencv`中我们可以使用`circle`函数来绘制圆，参数也非常简单，那我也简单介绍一下：

###### 必须参数

+ img 同上

+ centerPoint 圆心的坐标

+ color 同上

###### 可选参数

+ thickness 功能与rectangle方法一致

+ lineType 同上

以前我看面试题的时候记得有一个人说自己遇到一个面试题说：如何在一个画布上绘制出两个不相交的圆，由于时间关系，这家伙没有写上那些个很多的条件，直接写了一个同心圆不同半径即可，一个脑经急转弯就这么被他识破了······下面我们来实现这个脑经急转弯的同心圆。在上面的代码添加上以下的代码，或者你也可以新建一个文件来执行这些产生同心圆的代码，here we go（嘿喂狗！！！）！

```bash
centerPoint = (img.shape[1]//2, img.shape[0]//2)
allRadius = [10, 30, 40, 60]

for radius in allRadius:
    cv2.circle(img, centerPoint, radius, (200, 200, 0), 2)
```

好了，绘制圆的方法也弄完了，我们已经结束了这一节的学习了。

#### 总结

在本节中我们学习了如何使用`cv2.line`、`cv2.rectangle`、`cv2.circle`这三个方法来在图像上绘制简单的图像，希望你也稍稍注意一下这些函数的参数。

好了，下一节我们将会学习有关于图像的变换的内容。